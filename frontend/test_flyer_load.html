<!DOCTYPE html>
<html>

<head>
    <title>Test Flyer Load</title>
    <style>
        body {
            font-family: Arial;
            padding: 0;
        }

        .test-container {
            border: 1px solid #ccc;
            padding: 20px;
            margin: 10px 0;
        }

        #test1 {
            max-width: 300px;
            max-height: 300px;
            border: 2px solid red;
        }

        #test2 {
            max-width: 300px;
            max-height: 300px;
            border: 2px solid blue;
        }
    </style>
</head>

<body>
    <h1>Test de carga de imagen</h1>

    <div class="test-container">
        <h2>Test 1: Carga directa con &lt;img&gt;</h2>
        <img id="test1" src="/uploads/flyers/1771436174139-dsvly0.jpeg" alt="test1" />
        <p id="test1-status">Esperando...</p>
    </div>

    <div class="test-container">
        <h2>Test 2: Carga con JavaScript (createElement)</h2>
        <div id="test2-container"></div>
        <p id="test2-status">Esperando...</p>
    </div>

    <div class="test-container">
        <h2>Test 3: Fetch directa</h2>
        <p id="test3-status">Esperando...</p>
    </div>

    <script>
        // Test 1
        document.getElementById('test1').onload = function () {
            document.getElementById('test1-status').innerHTML = '✓ IMG tag loaded successfully';
            console.log('✓ Test 1: Loaded');
        };
        document.getElementById('test1').onerror = function () {
            document.getElementById('test1-status').innerHTML = '✗ IMG tag failed to load';
            console.error('✗ Test 1: Error');
        };

        // Test 2
        window.addEventListener('load', function () {
            const img = document.createElement('img');
            img.src = '/uploads/flyers/1771436174139-dsvly0.jpeg';
            img.style.maxWidth = '100%';
            img.style.maxHeight = '100%';
            img.alt = 'test2';

            img.onload = function () {
                document.getElementById('test2-status').innerHTML = '✓ createElement loaded successfully';
                console.log('✓ Test 2: Loaded');
            };
            img.onerror = function () {
                document.getElementById('test2-status').innerHTML = '✗ createElement failed to load';
                console.error('✗ Test 2: Error');
            };

            document.getElementById('test2-container').appendChild(img);
        });

        // Test 3
        fetch('/uploads/flyers/1771436174139-dsvly0.jpeg', { method: 'HEAD' })
            .then(res => {
                document.getElementById('test3-status').innerHTML = `✓ Fetch HEAD: ${res.status} ${res.statusText}`;
                console.log('✓ Test 3: Status', res.status);
            })
            .catch(err => {
                document.getElementById('test3-status').innerHTML = `✗ Fetch error: ${err.message}`;
                console.error('✗ Test 3:', err);
            });

        console.log('Tests iniciados...');
        console.log('URL: /uploads/flyers/1771436174139-dsvly0.jpeg');
    </script>
</body>

</html>