<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>El Templo de Claypole - Espacio Cultural y Sal√≥n de Eventos √önicos</title>
    <!-- Carga de Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Configuraci√≥n de fuentes y colores personalizados para el tema */
        :root {
            --color-primary: #581c87;
            /* Morado Oscuro/Templo */
            --color-secondary: #f0abfc;
            /* Rosa Fluorescente/Ne√≥n */
            --color-rustic: #44403c;
            /* Gris Piedra/Madera */
        }

        .text-neon {
            color: var(--color-secondary);
            text-shadow: 0 0 5px var(--color-secondary), 0 0 10px var(--color-secondary);
        }

        .bg-rustic {
            background-color: var(--color-rustic);
        }

        .border-neon {
            border-color: var(--color-secondary);
        }

        /* Estilo para simular el brillo de los murales */
        .neon-glow-card {
            box-shadow: 0 0 15px rgba(240, 171, 252, 0.5);
            /* Sombra suave ne√≥n */
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .neon-glow-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 0 25px rgba(240, 171, 252, 0.8);
        }

        /* Fondo con textura sutil de madera/rustico */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0c0a09;
            /* Negro muy oscuro */
            color: #d6d3d1;
            /* Gris claro */
        }

        /* Estilo para el fondo de la secci√≥n Hero con la imagen del frente */
        .hero-background {
            /* RUTA ACTUALIZADA seg√∫n tu confirmaci√≥n */
            background-image: url('./img/hero.jpg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
        }
    </style>
</head>

<body>

    <!-- Navegaci√≥n -->
    <header class="bg-rustic sticky top-0 z-50 shadow-lg">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <!-- Logo/T√≠tulo --><a href="#inicio" class="flex items-center space-x-3">
                    <!-- RUTA ACTUALIZADA seg√∫n tu confirmaci√≥n -->
                    <img src="./img/logo_transparente.png" alt="El Templo de Claypole Logo" class="h-10 w-auto">
                    <span class="text-base font-semibold text-neon tracking-wide hidden sm:block">El Templo de
                        Claypole</span>
                </a>

                <!-- Men√∫ Desktop -->
                <nav class="hidden md:flex space-x-8 items-center">
                    <a href="seccion_talleres.html"
                        class="text-sm font-medium hover:text-neon transition duration-150 ease-in-out">Talleres</a>
                    <a href="agenda_de_bandas.html"
                        class="text-sm font-medium hover:text-neon transition duration-150 ease-in-out">Bandas en
                        Vivo</a>
                    <a href="#espacio"
                        class="text-sm font-medium hover:text-neon transition duration-150 ease-in-out">El Espacio</a>
                    <!-- Enlace directo al sistema de reservas page.html -->
                    <a href="page.html"
                        class="px-3 py-1 text-sm rounded-full font-semibold bg-fuchsia-500 text-gray-900 hover:bg-fuchsia-400 transition duration-150 ease-in-out">Alquilar
                        Sal√≥n</a>
                    <!-- Men√∫ din√°mico: se reemplaza con Admin si est√° logueado -->
                    <div id="auth-menu-desktop"></div>
                </nav>

                <!-- Bot√≥n de Men√∫ M√≥vil --><button id="mobile-menu-button"
                    class="md:hidden p-2 rounded-md hover:bg-stone-700 focus:outline-none focus:ring-2 focus:ring-neon">
                    <svg class="h-6 w-6 text-neon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M4 6h16M4 12h16M4 18h16" />
                    </svg>
                </button>
            </div>
        </div>
        <!-- Men√∫ M√≥vil Desplegable -->
        <div id="mobile-menu" class="hidden md:hidden">
            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3 bg-rustic">
                <a href="seccion_talleres.html"
                    class="block px-3 py-2 rounded-md text-base font-medium hover:bg-stone-700 hover:text-neon">Talleres</a>
                <a href="agenda_de_bandas.html"
                    class="block px-3 py-2 rounded-md text-base font-medium hover:bg-stone-700 hover:text-neon">Bandas
                    en Vivo</a>
                <a href="#espacio"
                    class="block px-3 py-2 rounded-md text-base font-medium hover:bg-stone-700 hover:text-neon">El
                    Espacio</a>
                <a href="page.html"
                    class="block px-3 py-2 rounded-md text-base font-medium bg-fuchsia-500 text-gray-900 hover:bg-fuchsia-400">Alquilar
                    Sal√≥n</a>
                <!-- Men√∫ din√°mico m√≥vil: se reemplaza con Admin si est√° logueado -->
                <div id="auth-menu-mobile"></div>
            </div>
        </div>
    </header>

    <main>
        <!-- Secci√≥n 1: Hero / Introducci√≥n con imagen de fondo -->
        <section id="inicio"
            class="relative overflow-hidden min-h-screen pt-16 pb-24 md:pt-32 md:pb-40 text-center hero-background">
            <!-- Capa de superposici√≥n para mejorar la legibilidad del texto -->
            <div class="absolute inset-0 bg-black opacity-60"></div>
            <!-- Elemento visual para representar la fluorescencia (mantenido) -->
            <div class="absolute inset-0 flex justify-center items-center">
                <div
                    class="w-96 h-96 bg-fuchsia-900 rounded-full mix-blend-screen filter blur-3xl opacity-20 animate-pulse">
                </div>
            </div>
            <div class="relative z-10 max-w-4xl mx-auto px-4">
                <h1 class="text-4xl sm:text-6xl md:text-7xl font-extrabold tracking-tight text-white mb-4">
                    <span class="block text-neon">El Templo de Claypole</span>
                </h1>
                <div
                    class="max-w-4xl mx-auto mt-20 mb-20 text-center text-xl sm:text-2xl md:text-3xl font-light text-purple-300">
                    Descubre tu nuevo punto de encuentro.<br><br>

                    Un espacio √∫nico donde la m√∫sica, el movimiento y la buena onda se juntan. En nuestro sal√≥n suenan
                    bandas en vivo y en el patio, la juntada sigue entre sillones y parrilla.<br><br>

                    Tu lugar para tocar, bailar, celebrar y conectar.
                </div>
                <div class="mt-10 flex flex-col sm:flex-row justify-center space-y-4 sm:space-y-0 sm:space-x-6">
                    <a href="page.html"
                        class="bg-stone-800/60 border-2 border-neon text-neon font-bold py-3 px-8 rounded-lg hover:bg-fuchsia-900 hover:bg-opacity-20 transition duration-300 transform hover:scale-105">
                        Alquilar para Eventos
                    </a>
                    <a href="agenda_de_bandas.html"
                        class="bg-stone-800/60 border-2 border-neon text-neon font-bold py-3 px-8 rounded-lg hover:bg-fuchsia-900 hover:bg-opacity-20 transition duration-300 transform hover:scale-105">
                        Ver Bandas en Vivo
                    </a>
                    <a href="seccion_talleres.html"
                        class="bg-stone-800/60 border-2 border-neon text-neon font-bold py-3 px-8 rounded-lg hover:bg-fuchsia-900 hover:bg-opacity-20 transition duration-300 transform hover:scale-105">
                        Talleres y Actividades
                    </a>
                    <a href="seccion_cuidado_personal.html"
                        class="bg-stone-800/60 border-2 border-neon text-neon font-bold py-3 px-8 rounded-lg hover:bg-fuchsia-900 hover:bg-opacity-20 transition duration-300 transform hover:scale-105">
                        Cuidado Personal
                    </a>
                </div>
            </div>
        </section>


        <!-- Secci√≥n 3: Eventos - Bandas en Vivo (Cultural) -->
        <section id="eventos" class="py-20 bg-stone-900">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-12">
                    <h2 class="text-3xl font-extrabold text-neon sm:text-4xl">
                        Agenda Cultural
                    </h2>
                </div>

                <!-- Lista de Eventos (Mock-up) -->
                <div id="events-list" class="space-y-6 max-w-3xl mx-auto">
                    <p class="text-center text-lg text-stone-500">Cargando agenda...</p>
                </div>
                <div class="text-center mt-8">
                    <a href="agenda_de_bandas.html"
                        class="bg-fuchsia-500 text-gray-900 font-bold py-3 px-8 rounded-lg hover:bg-fuchsia-400 transition duration-300 transform hover:scale-105">
                        Ver Agenda Completa
                    </a>
                </div>

            </div>
        </section>


        <!-- Secci√≥n 2: El Espacio - Caracter√≠sticas √önicas -->
        <!-- Se a√±ade un enlace a Talleres en esta secci√≥n de caracter√≠sticas -->
        <section id="espacio" class="py-20 bg-stone-950">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-12">
                    <h2 class="text-3xl font-extrabold text-neon sm:text-4xl">
                        Galer√≠a de fotos
                    </h2>
                    <p class="mt-4 text-xl text-stone-400">
                        Navega y descubre los detalles que hacen de El Templo el lugar ideal para tu pr√≥xima fecha o
                        evento.
                    </p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-8">
                    <!-- Nueva Tarjeta: Talleres y Actividades -->
                    <div class="p-6 rounded-xl bg-rustic neon-glow-card col-span-1">
                        <a href="seccion_talleres.html">
                            <span class="text-4xl block mb-4 text-center cursor-pointer">üé®</span>
                            <h3 class="text-xl font-bold text-white mb-2 text-center">Talleres y Actividades</h3>
                            <p class="text-stone-300 text-sm text-center">
                                Consulta nuestro espacio cultural y las actividades que volver√°n en 2026.
                            </p>
                        </a>
                    </div>

                    <!-- Caracter√≠stica 1: Exterior R√∫stico y Deck -->
                    <div class="p-6 rounded-xl bg-rustic neon-glow-card">
                        <a href="seccion_salon.html">
                            <span class="text-4xl block mb-4 text-center">üèõ</span>
                            <h3 class="text-xl font-bold text-white mb-2 text-center">El Sal√≥n</h3>
                            <p class="text-stone-300 text-sm text-center">
                                Sal√≥n de 8 por 15 con escenario, cocina y cabina de sonido, aire acondicionado,
                                ventiladores y luces de colores.
                            </p>
                        </a>
                    </div>

                    <!-- Caracter√≠stica 2: Escenario y PA Profesional -->
                    <div class="p-6 rounded-xl bg-rustic neon-glow-card">
                        <span class="text-4xl block mb-4 text-center">üé§</span>
                        <h3 class="text-xl font-bold text-white mb-2 text-center">Sonido e Iluminaci√≥n Pro</h3>
                        <p class="text-stone-300 text-sm text-center">
                            PA profesional para m√∫sica en vivo, escenario principal y cabina de sonido dedicada. ¬°Listo
                            para bandas!
                        </p>
                    </div>

                    <!-- Caracter√≠stica 3: Murales Fl√∫or y Decoraci√≥n -->
                    <div class="p-6 rounded-xl bg-rustic neon-glow-card">
                        <span class="text-4xl block mb-4 text-center">üëΩ</span>
                        <h3 class="text-xl font-bold text-white mb-2 text-center">El Efecto Fl√∫or</h3>
                        <p class="text-stone-300 text-sm text-center">
                            Murales psicod√©licos de hongos, acu√°ticos y extraterrestres que cobran vida bajo las luces
                            UV.
                        </p>
                    </div>

                    <!-- Caracter√≠stica 4: Comodidades y Versatilidad -->
                    <div class="p-6 rounded-xl bg-rustic neon-glow-card">
                        <span class="text-4xl block mb-4 text-center">üöª</span>
                        <h3 class="text-xl font-bold text-white mb-2 text-center">Equipamiento</h3>
                        <p class="text-stone-300 text-sm text-center">
                            Barra, cocina/buffet, amplio sal√≥n, enredaderas internas y ba√±os sin g√©nero.
                        </p>
                    </div>
                </div>
            </div>
        </section>



        <!-- Secci√≥n 4: Alquiler de Sal√≥n -->
        <section id="alquiler" class="py-20 bg-rustic">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-12">
                    <h2 class="text-3xl font-extrabold text-neon sm:text-4xl">
                        Tu Evento en un Lugar Inolvidable
                    </h2>
                    <p class="mt-4 text-xl text-stone-200">
                        Alquil√° El Templo para lo que necesites: ¬°somos el espacio m√°s vers√°til de Claypole!
                    </p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-8 text-center">
                    <div
                        class="p-6 bg-stone-700 rounded-xl shadow-lg border-2 border-transparent hover:border-neon transition duration-300">
                        <span class="text-5xl block mb-4">ü•≥</span>
                        <h3 class="text-2xl font-bold text-white mb-2">Eventos Infantiles</h3>
                        <p class="text-stone-300">La cancha de f√∫tbol, la parrilla y el sal√≥n amplio lo hacen la opci√≥n
                            m√°s f√°cil y divertida.</p>
                    </div>
                    <div
                        class="p-6 bg-stone-700 rounded-xl shadow-lg border-2 border-transparent hover:border-neon transition duration-300">
                        <span class="text-5xl block mb-4">ü•Ç</span>
                        <h3 class="text-2xl font-bold text-white mb-2">Celebraciones Adultas</h3>
                        <p class="text-stone-300">La est√©tica, el PA y la barra atraen a quienes buscan un ambiente
                            original y vibrante.</p>
                    </div>
                    <div
                        class="p-6 bg-stone-700 rounded-xl shadow-lg border-2 border-transparent hover:border-neon transition duration-300">
                        <span class="text-5xl block mb-4">üíº</span>
                        <h3 class="text-2xl font-bold text-white mb-2">Todo Tipo de Eventos</h3>
                        <p class="text-stone-300">Reuniones, talleres, ferias, rodajes... el l√≠mite lo pon√©s vos con la
                            versatilidad de nuestro sal√≥n.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Secci√≥n 5: Reserva (Call to Action) -->
        <section id="reservas" class="py-20 bg-stone-950">
            <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
                <h2 class="text-4xl font-extrabold text-white">
                    <span class="text-neon block">¬øListo para Celebrar o Tocar?</span>
                </h2>
                <p class="mt-4 text-xl text-stone-400">
                    Reserva tu fecha para eventos privados o consulta la agenda cultural.
                </p>
                <div class="mt-8">
                    <a href="page.html"
                        class="inline-flex items-center justify-center bg-fuchsia-500 text-gray-900 font-bold py-4 px-10 rounded-xl text-xl shadow-2xl shadow-fuchsia-500/50 hover:bg-fuchsia-400 transition duration-300 transform hover:scale-105">
                        Alquilar el Sal√≥n (Arm√° tu presupuesto)
                    </a>
                    <p class="mt-4 text-sm text-stone-500">
                        Si buscas una fecha para tu banda, <a href="agenda_de_bandas.html"
                            class="text-fuchsia-400 underline hover:text-fuchsia-200">haz clic aqu√≠</a>.
                    </p>
                </div>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="bg-rustic border-t border-stone-700 py-8">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <p class="text-sm text-stone-400">&copy; <span id="year"></span> El Templo de Claypole. Todos los derechos
                reservados.</p>
            <p class="mt-2 text-xs text-stone-500">Seguinos en redes | Claypole, Buenos Aires.</p>
        </div>
    </footer>

    <script>
        // L√≥gica de JavaScript para el men√∫ m√≥vil y el a√±o del footer
        document.getElementById('year').textContent = new Date().getFullYear();

        const menuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        const navLinks = mobileMenu.querySelectorAll('a');

        // Funci√≥n para alternar la visibilidad del men√∫
        function toggleMenu() {
            mobileMenu.classList.toggle('hidden');
        }

        menuButton.addEventListener('click', toggleMenu);

        // Ocultar el men√∫ m√≥vil al hacer clic en un enlace
        navLinks.forEach(link => {
            link.addEventListener('click', () => {
                if (!mobileMenu.classList.contains('hidden')) {
                    mobileMenu.classList.add('hidden');
                }
            });
        });

        // ----------------------------------------------------
        // L√ìGICA DE CARGA DE EVENTOS DESDE LA API (COPIADA DE agenda_de_bandas.html)
        // ----------------------------------------------------

        // MODIFICACI√ìN: URL Din√°mica
        const currentHost = window.location.host;
        let API_BASE_URL = '';

        if (currentHost.includes('localhost')) {
            // Si est√°s en desarrollo local (usando localhost o una IP local)
            API_BASE_URL = 'http://localhost';
        } else if (currentHost.includes('192.168.1.10')) {
            // Si est√°s en desarrollo local (usando localhost o una IP local)
            API_BASE_URL = 'http://192.168.1.10';
        } else {
            // Si est√°s usando el dominio p√∫blico
            API_BASE_URL = window.location.protocol + '//' + currentHost;
        }

        const API_URL = API_BASE_URL + '/api/tickets/eventos';

        const eventsListContainer = document.getElementById('events-list');

        /**
         * Formatea un objeto de fecha y hora (ej: '2025-12-05 21:00:00')
         * en partes legibles para la tarjeta.
         */
        function formatDateTime(dateTimeString) {
            const date = new Date(dateTimeString);
            const dayOptions = { day: '2-digit' };
            const monthOptions = { month: 'short' };
            const timeOptions = { hour: '2-digit', minute: '2-digit', hour12: false };

            // Se usa 'es-AR' para formato de fecha
            const day = date.toLocaleDateString('es-AR', dayOptions);
            const month = date.toLocaleDateString('es-AR', monthOptions).toUpperCase().replace('.', '');
            const time = date.toLocaleTimeString('es-AR', timeOptions);

            return { day, month, time };
        }

        /**
         * Genera la estructura HTML para un solo evento.
         */
        function generateEventCard(event) {
            const { id, nombre_banda, fecha_hora, precio_base, precio_anticipada, precio_puerta, descripcion, activo, aforo_maximo } = event;
            const { day, month, time } = formatDateTime(fecha_hora);

            // Determinar precios - priorizar precio_anticipada y precio_puerta sobre precio_base
            const precioAnticipada = precio_anticipada !== null && precio_anticipada !== undefined ? parseFloat(precio_anticipada) : null;
            const precioPuerta = precio_puerta !== null && precio_puerta !== undefined ? parseFloat(precio_puerta) : null;
            const precioBase = precio_base !== null && precio_base !== undefined ? parseFloat(precio_base) : 0;
            
            // Es gratis solo si TODOS los precios son 0 o null
            const esGratis = (precioAnticipada === null || precioAnticipada === 0) && 
                             (precioPuerta === null || precioPuerta === 0) && 
                             precioBase === 0;
            
            // Mostrar precios
            let priceText = '';
            if (precioAnticipada !== null && precioAnticipada > 0) {
                priceText = `$ ${precioAnticipada.toLocaleString('es-AR')} ARS (Anticipada)`;
            }
            if (precioPuerta !== null && precioPuerta > 0) {
                priceText += priceText ? ` ‚Ä¢ $ ${precioPuerta.toLocaleString('es-AR')} ARS (Puerta)` : `$ ${precioPuerta.toLocaleString('es-AR')} ARS (Puerta)`;
            }
            if (!priceText && precioBase > 0) {
                priceText = `$ ${precioBase.toLocaleString('es-AR')} ARS`;
            }
            
            let buttonText = 'Sacar Entrada';
            let buttonClass = 'bg-fuchsia-500 hover:bg-fuchsia-400';
            let borderClass = 'border-fuchsia-500';
            let dateBgClass = 'bg-fuchsia-900';
            let priceTextColor = 'text-neon';
            let link = `agenda_de_bandas.html?event_id=${id}`; // Enlace a la p√°gina de agenda

            if (esGratis) {
                priceText = '¬°GRATIS!';
                buttonText = 'Reservar Lugar';
                buttonClass = 'bg-emerald-500 hover:bg-emerald-400';
                borderClass = 'border-emerald-500';
                dateBgClass = 'bg-emerald-900';
                priceTextColor = 'text-emerald-400';
            }

            return `
            <div data-event-id="${id}" class="p-4 sm:p-6 bg-stone-800 rounded-xl flex flex-col sm:flex-row items-center justify-between border-l-4 ${borderClass}">
                <div class="flex items-center space-x-4">
                    <div class="text-center p-2 rounded-lg ${dateBgClass} text-white flex-shrink-0">
                        <p class="text-xl font-bold">${day}</p>
                        <p class="text-xs">${month}</p>
                    </div>
                    <div>
                        <h4 class="text-xl font-semibold text-white">${nombre_banda}</h4>
                        <p class="text-sm text-stone-400">${descripcion.substring(0, 50)}... | Puertas: ${time} hs.</p>
                        <p class="text-lg font-bold ${priceTextColor} mt-1">${priceText}</p>
                    </div>
                </div>
                <a href="${link}" class="mt-3 sm:mt-0 ${buttonClass} text-gray-900 font-medium py-2 px-4 rounded-full text-sm transition shadow-lg">
                    ${buttonText}
                </a>
            </div>
        `;
        }

        /**
         * Procesa y renderiza la lista de eventos.
         */
        function renderEvents(events) {
            eventsListContainer.innerHTML = ''; // Limpia el mensaje de carga
            if (!events || events.length === 0) {
                eventsListContainer.innerHTML = `
                <div class="p-8 text-center bg-stone-800 rounded-xl border border-stone-700">
                    <p class="text-xl text-stone-400">¬°Parece que a√∫n no hay eventos programados!</p>
                    <p class="text-sm text-stone-500 mt-2">Pronto anunciaremos la nueva agenda.</p>
                </div>
            `;
                return;
            }

            // Filtramos solo los primeros eventos para la home.
            const activeEvents = events.filter(event => event.activo === 1);
            const eventsToShow = activeEvents.slice(0, 4); // Muestra un m√°ximo de 4

            if (eventsToShow.length === 0 && activeEvents.length > 0) {
                // Esto sucede si solo hay eventos inactivos, aunque la l√≥gica del backend es incierta.
                eventsToShow = activeEvents.slice(0, 4);
            } else if (eventsToShow.length === 0 && activeEvents.length === 0 && events.length > 0) {
                // Si el filtro no funcion√≥, mostramos los primeros 4 de la lista original como fallback visual.
                eventsToShow = events.slice(0, 4);
            }


            eventsToShow.forEach(event => {
                const cardHtml = generateEventCard(event);
                eventsListContainer.insertAdjacentHTML('beforeend', cardHtml);
            });

            // Agrega un mensaje si hay m√°s eventos que no se muestran
            if (events.length > eventsToShow.length) {
                eventsListContainer.insertAdjacentHTML('beforeend', `
                <p class="text-center text-sm text-stone-500 mt-4">
                    ${events.length - eventsToShow.length} eventos m√°s programados. 
                    <a href="agenda_de_bandas.html" class="text-fuchsia-400 underline hover:text-fuchsia-200">Ver agenda completa</a>.
                </p>
            `);
            }
        }


        /**
         * Llama a la API para obtener la lista de eventos.
         */
        async function fetchEvents() {
            try {
                const response = await fetch(API_URL);
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const data = await response.json();
                renderEvents(data);

            } catch (error) {
                console.error('Error al cargar la agenda de eventos:', error);
                eventsListContainer.innerHTML = `
                <div class="p-8 text-center bg-red-900/30 text-red-300 rounded-xl border border-red-500 max-w-3xl mx-auto">
                    <p class="text-xl font-bold">Error de Conexi√≥n</p>
                    <p class="text-sm mt-2">No se pudo cargar la agenda. Aseg√∫rate que el backend de Node.js est√© corriendo. </p>
                    <p class="text-xs mt-1">Detalle: ${error.message}</p>
                </div>
            `;
            }
        }

        // Manejo de autenticaci√≥n en el navbar
        function updateAuthMenu() {
            const token = localStorage.getItem('authToken');
            const desktopMenu = document.getElementById('auth-menu-desktop');
            const mobileMenu = document.getElementById('auth-menu-mobile');

            if (token) {
                // Usuario autenticado
                const desktopHTML = `
                    <a href="/admin.html" 
                       class="px-3 py-1 text-sm rounded-full font-semibold bg-emerald-500 text-gray-900 hover:bg-emerald-400 transition duration-150">
                        üîê Admin
                    </a>
                `;
                const mobileHTML = `
                    <a href="/admin.html"
                       class="block px-3 py-2 rounded-md text-base font-medium bg-emerald-500 text-gray-900 hover:bg-emerald-400">
                        üîê Admin Panel
                    </a>
                    <button onclick="logout()" 
                            class="block w-full text-left px-3 py-2 rounded-md text-base font-medium text-red-400 hover:bg-red-900 hover:text-white">
                        üö™ Cerrar Sesi√≥n
                    </button>
                `;
                desktopMenu.innerHTML = desktopHTML;
                mobileMenu.innerHTML = mobileHTML;
            } else {
                // Usuario no autenticado
                const desktopHTML = `
                    <a href="login.html"
                       class="px-3 py-1 text-sm rounded-full font-semibold bg-stone-800/60 border-2 border-neon text-neon hover:bg-stone-700 transition duration-150">
                        Login
                    </a>
                `;
                const mobileHTML = `
                    <a href="login.html"
                       class="block px-3 py-2 rounded-md text-base font-medium hover:bg-stone-700 hover:text-neon border-2 border-transparent hover:border-neon text-neon">
                        Login
                    </a>
                `;
                desktopMenu.innerHTML = desktopHTML;
                mobileMenu.innerHTML = mobileHTML;
            }
        }

        function logout() {
            localStorage.removeItem('authToken');
            window.location.href = '/index.html';
        }

        // Escuchar cambios en localStorage (sesi√≥n iniciada en otra pesta√±a)
        window.addEventListener('storage', updateAuthMenu);

        // ----------------------------------------------------
        // INICIALIZACI√ìN
        // ----------------------------------------------------
        document.addEventListener('DOMContentLoaded', () => {
            // 1. Actualizar men√∫ de autenticaci√≥n
            updateAuthMenu();
            // 2. Inicia la carga de datos de la API
            fetchEvents();
            // El resto de la l√≥gica de desplazamiento y men√∫ m√≥vil ya est√° integrada.
        });

    </script>
</body>

</html>